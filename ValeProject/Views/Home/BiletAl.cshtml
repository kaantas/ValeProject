@model IEnumerable<ValeProject.Models.Sefer>

@{
    
}
<link href="~/css/UyeOl_Style.css" rel="stylesheet" />
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" type="text/css" href="assets/css/bootstrap.css">
<link rel="stylesheet" type="text/css" href="assets/css/main.css">
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.1/css/font-awesome.min.css">
<!-- Google Fonts -->
<link href='https://fonts.googleapis.com/css?family=Passion+One' rel='stylesheet' type='text/css'>
<link href='https://fonts.googleapis.com/css?family=Oxygen' rel='stylesheet' type='text/css'>

<!-- DatePicker -->
<script type="text/javascript" src="/scripts/moment.min.js"></script>
<script type="text/javascript" src="/scripts/bootstrap.min.js"></script>
<script type="text/javascript" src="/scripts/bootstrap-datetimepicker.js"></script>
<link rel="stylesheet" href="/Content/bootstrap-datetimepicker.css" />
<script type="text/javascript">
    $(function () {
        $('#datetimepicker1').datetimepicker();
    });
</script>

<div class="container" style="padding-top: 55px;">
    <div class="row">
        <div class="col-md-12">
            <div class="panel panel-default">
                <div class="panel-heading">
                    <h3 class="panel-title">Bilet Satın Al</h3>
                </div>
                <div class="panel-body" ng-app="myApp" ng-controller="biletController">
                    <form accept-charset="UTF-8" role="form" action="/Home/BiletAl" method="post">
                        <fieldset>
                            <div class="col-md-3">
                                <div class="form-group">
                                    <label for="email" class="cols-sm-2 control-label">Kalkış</label>
                                    <div class="cols-sm-10">
                                        <select id="selectbasic" name="kalkisSehri" class="form-control input-md">
                                            <option>İstanbul</option>
                                            <option>Eskişehir</option>
                                        </select>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-3">
                                <div class="form-group">
                                    <label for="email" class="cols-sm-2 control-label">Varış</label>
                                    <div class="cols-sm-10">
                                        <select id="selectbasic" name="VarisSehri" class="form-control input-md">
                                            <option>Eskişehir</option>
                                            <option>Bursa</option>
                                        </select>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-3">
                                <div class='row'>
                                    <div class='col-sm-12'>
                                        <div class="form-group">
                                            <label for="email" class="cols-sm-2 control-label">Tarih</label>
                                            <div class='input-group date' id='datetimepicker1'>
                                                <input type='text' name="tarih" class="form-control" />
                                                <span class="input-group-addon">
                                                    <span class="glyphicon glyphicon-calendar"></span>
                                                </span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-3" style="margin-top:25px">
                                <input class="btn btn-lg btn-success btn-block" type="submit" value="Sefer Sorgula" style="color: white">
                            </div>
                        </fieldset>
                    </form>
                    <div class="col-md-9">
                        <table class="table">
                            @if (Model != null)
                            {
                                <tr style="background: #5cb85c; color: white; font-weight: bold">
                                    <th>
                                        Kalkış Saati
                                    </th>
                                    <th>
                                        Otobüs Markası
                                    </th>
                                    <th>
                                        Bilet Fiyatı
                                    </th>
                                    <th>
                                        Tahmini Süre
                                    </th>
                                    <th></th>
                                </tr>

                                foreach (var item in Model)
                                {
                                    <tr>
                                        <td>
                                            @Html.DisplayFor(modelItem => item.KalkisSaati)
                                        </td>
                                        <td>
                                            @Html.DisplayFor(modelItem => item.Otobus.Marka)
                                        </td>
                                        <td>
                                            @Html.DisplayFor(modelItem => item.Fiyat)
                                        </td>
                                        <td>
                                            @Html.DisplayFor(modelItem => item.TahminiSure) Saat
                                        </td>
                                        <td>
                                            <div class="col-md-12">
                                                <input class="btn btn-lg btn-primary btn-block" type="submit" value="İncele" ng-click="go()" style="color: white">
                                            </div>
                                        </td>
                                    </tr>
                                }
                            }
                            else
                            {
                                <h2>
                                    <center>@ViewBag.mesaj</center>
                                </h2>
                            }
                        </table>



                    </div>
                    <div class="col-md-3" style="border:1px gray solid; height: 600px;">
                    </div>

                    <div ng-show="v">
                        <table>
                            <tr>
                                <th>Ad</th>
                                <th>Soyad</th>
                                <th>Cinsiyet</th>
                                <th>Koltuk No</th>
                            </tr>
                            <tr ng-repeat="bilet in biletler">
                                <td>{{bilet.MusteriAd}}</td>
                                <td>{{bilet.MusteriSoyad}}</td>
                                <td>{{bilet.MusteriCinsiyet}}</td>
                                <td>{{bilet.KoltukNo}}</td>
                            </tr>
                        </table>
                    </div>

                </div>
            </div>
        </div>
    </div>
</div>
<script src="~/Scripts/angular.js"></script>
<script src="~/Scripts/myApp.js"></script>
<script type="text/javascript">
    $(".form_datetime").datetimepicker({ format: 'yyyy-mm-dd hh:ii' });
</script>
